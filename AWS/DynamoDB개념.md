### DynamoDB란?

AWS에서 제공하는 완전 관리형 NoSQL로서 확장 가능한 고성능 분산 데이터베이스

### 특징?

- 복잡한 트랜잭션까지는 구현될 필요가 없으며,
    - 복잡한 트랜잭션도 부분적으로 지원(추가요금)
- 많은 Event들을 받아서 안전하게 저장
    - 고성능 분산 데이터베이스로 니즈를 충족
- 이미 명확한 목적을 가지고 저장되어 정해진 접근 패턴이 존재하는 Query를 조회하기 위해
    - 스키마가 없기 때문에, 명확한 목적/접근 패턴이 있어야만 효율적인 Key설계가 가능하다
- 실시간 고성능을 가지는 DB가 필요하다
    - Key-Value NoSQL의 일종으로 접근 패턴에 기반한 Key 설계가 이루어질 경우, 고성능을 기대할 수 있다.

### AWS DynamoDB Key 개념 (PK,SK)

DynamoDB는 기본적으로 Key-Value 형식의 NoSQL, 데이터를 조회하기 위한 Key는 2가지가 존재한다.

**PK(Partition Key)**

- DynamoDB에 저장되는 데이터를 논리적으로 분리하는 키.
- 이 키 값을 기반으로 AWS 내부적으로 데이터를 글로벌하게 분산시켜 파티셔닝하고 데이터를 조회.
- 데이터가 일정 수준 이상 많아지게되아, 확장해야될 때에도 이 PK를 기준으로 확장, Equal 조건으로만 쿼리 가능
- 즉, PK를 잘 설계 해야만 확장성과 성능 모두를 챙길 수 있다.

**SK(Sort Key)**

- DynamoDB에서 Partition Key를 통해서 가져온 데이터들의 순서를 결정하는 데 사용하는 키.
- SK를 사용해서 파티션 내에서 데이터를 정렬하고 범위 쿼리를 실행해 볼 수도 있다.
- SK는 항상 PK와 같이 사용되어야만 한다.
    - 독립적으로 사용이 불가능
- SK를 사용하지 않을 수도 있다.

### AWS DynamoDB의 인덱스 개념 (GSI, LSI)

PK,SK만 사용해서 니즈 충족이 어려울 경우 인덱스를 사용할 수 있다.

**GSI(Global Secondary Index)**

- 테이블의 기본 Key인 PK, SK외에도 추가적으로 검색하고 싶은 key(column)이 존재할 수도 있다.
- 그럴 때, 테이블에 GSI를 추가해서 한 쌍의 (PK, SK)를 추가로 생성할 수도 있다.
    - 추가비용 존재

**LSI(Local Secondary Index)**

- 기본 설정된 PK에 대해, 추가적인 SK를 사용하기 위한 인덱스
- 즉(PK, SK)의 조건 뿐만 아니라 (PK, LSI) 조건으로도 검색이 가능하게 함.
- **테이블 생성 이후에는 추가가 불가능하다 (생성 시점에만 추가 가능!)**
    - 비용이 들지만, GSI 보다는 저렴하다.

### AWS DynamoDB Key 설계

DynamoDB의 Key설계에는 많은 고려 사항들이 있을 수 있지만,

테이블에 어떻게 접근할 지에 대한 접근 패턴(Access Pattern) 분석이 대부분을 차지

**“어떤 Parameter를 가지고, 어떤 Data를 얻기 위해 어던 DynamoDB Table에 접근할거야!”**

에 대한 정확한 사전 분석이 필요하다.