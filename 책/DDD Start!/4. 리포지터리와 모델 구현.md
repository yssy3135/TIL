### **Spring Data JPA를 이용한 리포지터리 구현**

JPA매핑을 위한 기본 규칙

- 애그리거트 루트는 엔티티이므로 @Entity로 매핑
- 한테이블에 엔티티와 밸류 데이터가 같이있다면
    - 밸류는 @Embeddable로 매핑
    - 밸류타임 프로퍼티는 @Embedded로 매핑

JPA에서 @Entity와 @Embeddable로 클래스를 매핑하려면 기본 생성자를 제공해야 함

- DB에서 데이터를 읽어와 매핑된 객체를 생성할 때 기본 생성자를 사용해서 객체를 생성하기 때문

**************************밸류를 이용한 ID 매핑**************************

- 밸류타입을 식별자로 매핑하면 @Id 대신 @EmbeddedId 애너테이션을 사용
- JPA에서 식별자 타입은 Serializable 타입이어야 하므로 식별자로 사용할 밸류 타입은 Serializable 인터페이스를 상속받아야 한다.
- 밸류 타입으로 식별자를 구현할 때 얻을 수 있는 장점은 식별자에 기능을 추가할 수 있다는 점.

***************************************************별도 테이블에 저장하는 밸류 매핑***************************************************

- 애그리거트에서 루트 엔티티를 뺀 나머지 구성요소는 대부분 밸류
- 루트 엔티티 외에 또 다른 엔티티가 있다면 진짜 엔티티인지 의심해봐야 한다.
- 단지 별도 테이블에 데이터를 저장한다고 해서 엔티티인 것은 아님.
- 엔티티가 확실하다면 다른 애그리거트는 아닌지 확인해야함.
- 자신만의 독자적인 라이프 사이클을 갖는다면 구분되는 애그리거트일 가능성이 높다.