### 9.2.1 풀 테이블 스캔과 풀 인덱스 스캔

**언제 풀 테이블 스캔을 할까?**
- 테이블 레코드 건수가 작아서 인덱스를 읽는 것 보다 풀 테이블 스캔을 하는 편이 더 빠른 경우(일반적으로 테이블 페이지 1개로 구성된 경우)
- WHERE 절이나 ON 절에 인덱스를 이용할 수 있는 적절한 조건이 없는 경우
- 인덱스 레인지 스캔을 사용할 수 있는 쿼리라고 하더라도 옵티마이저가 판단한 조건 일치 레코드 건수가 너무 많은 경우(B-Tree를 샘플링해서 조사한 통계정보 기준)


**MySQL의 풀 테이플 스캔은 어떨까?**

**MyISAM**
- 풀 테이블 스캔을 실행할 때 디스크로부터 페이지를 하나씩 읽어온다.

**InnoDB**
- 특정 테이블의 연속된 데이터 페이지가 읽히면 백그라운드 스레드에 의해 리드 어헤드(Read ahead) 작업이 자동으로 시작.
- 테이블 스캔이 실행되면 몇 개의 데이터 페이지는 포그라운드 스레드가 읽기 실행
- 특정 시점부터는 읽기 작업을 백그라운드 스레드로 넘김
    - 백그라운드 스레드가 읽는 시점부터 한번에 4개, 8개씩 페이지를 읽으면서 그 단위를 증가시킴
    - 최대 64개 까지 읽어서 버퍼풀에 저장
- 포그라운드 스레드는 버퍼풀에 저장되어있는 데이터를 가져다 사용하기만 하면 된다.
- 위 과정으로 인해 쿼리가 상당히 빨라진다.


**리드 어헤드란?**
- 어떤 영역의 데이터가 앞으로 필요할거라는 것을 예측해서 요청이 오기 전에 미리 디스크에서 읽어 InnoDB의 버퍼 풀에 가져다 두는 것을 의미.
- innodb_read_ahead_threshold 시스템 변수 이용해 InnoDB 스토리지 엔진이 언제 리드 어헤드를 시작할지 임계값을 정할 수 있음.
- 풀 테이블 스캔에서만 사용되는 것이 아니라 풀 인덱스 스캔에서도 동일하게 사용
